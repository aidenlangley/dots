#! /usr/bin/env sh

case "$1" in
'' | *[!0-9]*)
	echo "Interval must be an integer"
	exit 1
	;;
*) ;;
esac

while true; do
	c=0
	t=0

	freq=$(awk '/MHz/ {print $4}' </proc/cpuinfo | (
		while read -r i; do
			t=$(echo "$t + $i" | bc)
			c=$((c + 1))
		done
		echo "scale=1; $t / $c / 1000" | bc
	))

	echo "freq|float|$freq"
	echo

	sleep "$1"
done
