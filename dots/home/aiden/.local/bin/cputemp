#! /usr/bin/env sh

interval=$1

case "$interval" in
'' | *[!0-9]*)
	echo "Interval must be an integer"
	exit 1
	;;
*) ;;
esac

echo "temp|int|30"
echo

while true; do
	temp=$(
		printf "%.0f" "$(
			sensors |
				awk '/Tctl:/{print $2}' |
				sed 's/\(.*\)+/\1/' |
				sed 's/\(.*\)Â°C/\1/'
		)"
	)

	if test "$temp" -ne 0; then
		echo "temp|int|$temp"
		echo
	fi

	sleep "$interval"
done
